<!DOCTYPE html>
<html>
  <head>
    <title>Canvas 이미지 애니메이션</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      canvas {
        background: #eee;
      }
    </style>
  </head>

  <body>
    <h1>Image</h1>
    <canvas class="canvas" width="600" height="400"
      >이 브라우저는 캔버스를 지원하지 않습니다.</canvas
    >
    <script>
      const canvas = document.querySelector(".canvas");
      const ctx = canvas.getContext("2d");
      // const imgEl = document.createElement('img');
      // 이미지 객체를 생성해도 됨
      const imgEl = new Image();
      imgEl.src = "../images/ilbuni1.png";
      let posX = 0;
      let step = 5;

      const animImage = () => {
        requestAnimationFrame(animImage);

        if (posX >= canvas.width - 60) {
          step *= -1;
        } else if (posX < 0) {
          step *= -1;
        }

        posX += step;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(imgEl, posX, 20, 60, 80);
      };

      // 이미지는 외부 자원이므로
      // 이미지가 로드된 후에 그려준다.
      imgEl.addEventListener("load", animImage);
    </script>
  </body>
</html>
